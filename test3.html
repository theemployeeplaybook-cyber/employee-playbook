<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profile | The Employee Playbook</title>

  <!-- ICONS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- FONTS -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- THEME PRELOAD (prevents flash + keeps toggle consistent) -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem('theme');
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const useDark = saved ? saved === 'dark' : prefersDark;
        if (useDark) document.documentElement.classList.add('dark-mode');
      } catch (e) {}
    })();
  </script>

  <style>
    :root{
      --primary-white:#FFFFFF;
      --light-gray:#F8F9FA;
      --medium-gray:#E9ECEF;
      --dark-gray:#6C757D;
      --text-dark:#212529;
      --text-medium:#495057;

      --accent-purple:#7B5FC4;
      --accent-purple-dark:#5A4496;
      --light-purple:#E6E0F5;
      --lighter-purple:#F0EBFA;

      --border-light: rgba(0, 0, 0, 0.08);
      --nav-bg: rgba(255, 255, 255, 0.95);

      --shadow: 0 2px 8px rgba(0,0,0,0.08);
      --premium-gradient: linear-gradient(135deg, #7B5FC4 0%, #5A4496 100%);
      --premium-card-shadow: 0 6px 20px rgba(123, 95, 196, 0.12);

      --neutral-bg:#F8F9FA;
      --crisis-red:#FF6B6B;

      /* COMPACT TOKENS */
      --radius-xl: 14px;
      --radius-lg: 12px;
      --radius-md: 10px;

      --focus-ring: 0 0 0 3px rgba(123, 95, 196, 0.14);

      --pad-1: 10px;
      --pad-2: 14px;
      --pad-3: 18px;

      --gap-1: 10px;
      --gap-2: 14px;
      --gap-3: 18px;
    }

    .dark-mode{
      --primary-white:#121212;
      --light-gray:#1E1E1E;
      --medium-gray:#2D2D2D;
      --dark-gray:#8A8A8A;
      --text-dark:#F5F5F5;
      --text-medium:#CCCCCC;

      --accent-purple:#8B6CE6;
      --accent-purple-dark:#6A4FC4;
      --light-purple:#2A1E4A;
      --lighter-purple:#1E1A2E;

      --border-light: rgba(255, 255, 255, 0.08);
      --nav-bg: rgba(18, 18, 18, 0.95);

      --shadow: 0 2px 8px rgba(0,0,0,0.2);
      --premium-card-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);

      --neutral-bg:#1E1E1E;
      --crisis-red:#FF5252;
    }

    *{ margin:0; padding:0; box-sizing:border-box; font-family:'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    html{ scroll-behavior:smooth; }
    body{
      background:var(--primary-white);
      color:var(--text-dark);
      line-height:1.55;
      overflow-x:hidden;
      transition: background-color .2s ease, color .2s ease;
      opacity:0;
    }
    body.loaded{ opacity:1; }

    .container{ max-width:1400px; margin:0 auto; padding:0 18px; }

    /* ===========================
       NAV (unchanged structure)
    =========================== */
    nav{
      position:fixed; top:0; width:100%;
      background:var(--nav-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index:1000;
      border-bottom:1px solid var(--border-light);
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      height:80px;
      transition: background-color .2s ease, border-color .2s ease;
    }
    .nav-container{
      display:flex; justify-content:space-between; align-items:center;
      padding:12px 0; height:100%;
    }
    .logo-img{
      height:100px; width:auto;
      transform: translateX(20%);
      padding:14px 10px;
      transition: all .2s ease;
      display:block;
      min-height:100px;
    }
    .dark-mode .logo-img{ content:url("assets/img/logo-dark.png"); }

    .nav-links{ display:flex; gap:50px; }
    .nav-link{
      color:var(--text-dark);
      text-decoration:none;
      font-weight:500;
      font-size:17px;
      transition: color .2s ease;
    }
    .nav-link:hover{ color:var(--accent-purple); }

    .nav-actions{
      display:flex; align-items:center; gap:24px;
      transform: translateX(-20%);
    }
    .sign-in{
      color:var(--text-dark);
      text-decoration:none;
      font-weight:500;
      font-size:17px;
    }
    .header-cta{
      background:var(--accent-purple);
      color:white;
      padding:8px 20px;
      border-radius:50px;
      text-decoration:none;
      font-weight:600;
      font-size:14px;
      transition: all .2s ease;
      box-shadow: 0 5px 15px rgba(123, 95, 196, 0.3);
      display:inline-flex; align-items:center; gap:8px;
    }
    .header-cta:hover{
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(123, 95, 196, 0.35);
    }
    .theme-toggle, .mobile-toggle{
      background:none; border:none;
      color:var(--text-dark);
      cursor:pointer;
      border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      transition: background-color .2s ease;
    }
    .theme-toggle{ width:36px; height:36px; font-size:16px; }
    .mobile-toggle{ display:none; width:40px; height:40px; font-size:24px; }
    .theme-toggle:hover, .mobile-toggle:hover{ background:var(--light-gray); }

    .nav-link-container{ position:relative; display:inline-block; }
    .new-tag{
      position:absolute; top:-12px; right:-35px;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color:#000;
      font-size:10px;
      font-weight:700;
      padding:2px 6px;
      border-radius:4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      z-index:10;
      white-space:nowrap;
    }
    .mobile-sign-in{ display:none; }

    /* ===========================
       PAGE LAYOUT (COMPACT)
    =========================== */
    main{
      padding: 92px 18px 22px; /* reduced */
      min-height: calc(100vh - 150px);
    }

    .content-wrapper{
      width:100%;
      display:flex;
      flex-direction:column;
      gap: var(--gap-2);
    }

    .profile-header{
      text-align:center;
      padding-top: 18px; /* reduced */
      margin-bottom: 6px; /* reduced */
    }
    .profile-title{
      font-size: 38px;  /* reduced */
      font-weight: 750;
      margin-bottom: 8px;
      line-height: 1.1;
      letter-spacing:-0.02em;
    }
    .profile-subtitle{
      font-size: 15px; /* reduced */
      color:var(--text-medium);
      max-width: 760px;
      margin: 0 auto;
      font-weight: 500;
    }

    .profile-container{
      display:flex;
      gap: var(--gap-3);
      margin-bottom: 18px;
      align-items:flex-start;
    }

    /* Sidebar */
    .profile-sidebar{
      width: 290px;
      background: var(--primary-white);
      border-radius: var(--radius-xl);
      padding: var(--pad-2);
      box-shadow: var(--premium-card-shadow);
      border: 1px solid var(--border-light);
      position: sticky;
      top: 96px; /* slightly tighter for compact */
      overflow:hidden;
      height: fit-content;
    }
    .profile-sidebar::before{
      content:"";
      position:absolute;
      top:0; left:0; width:100%; height:4px;
      background: var(--premium-gradient);
    }

    .profile-picture{ text-align:center; margin-bottom: 12px; }
    .profile-avatar{
      width: 92px; height: 92px;
      border-radius:50%;
      background: var(--lighter-purple);
      color: var(--accent-purple);
      display:flex; align-items:center; justify-content:center;
      margin: 0 auto 10px;
      font-size: 32px;
      border: 3px solid var(--light-purple);
      box-shadow: 0 4px 12px rgba(123, 95, 196, 0.12);
    }
    .profile-name{ font-size: 18px; font-weight: 750; margin-bottom: 2px; }
    .profile-role{ font-size: 12px; color:var(--text-medium); margin-bottom: 10px; }

    .change-photo{
      background:none;
      border:1px solid var(--accent-purple);
      color: var(--accent-purple);
      padding: 7px 12px;
      border-radius:999px;
      cursor:pointer;
      font-size: 12px;
      font-weight: 700;
      transition: all .2s ease;
    }
    .change-photo:hover{ background: var(--accent-purple); color:#fff; }

    .sidebar-menu{ list-style:none; margin-top: 10px; }
    .sidebar-menu li{ margin-bottom: 8px; }

    .sidebar-menu a{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      text-decoration:none;
      color: var(--text-medium);
      font-weight: 700;
      transition: background .15s ease, border-color .15s ease, transform .15s ease, color .15s ease;
      border: 1px solid transparent;
    }
    .sidebar-left{ display:flex; align-items:center; gap:10px; }
    .sidebar-menu i{ width:18px; text-align:center; }

    .tab-meta{
      font-size: 10px;
      font-weight: 800;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--lighter-purple);
      color: var(--accent-purple);
      border: 1px solid rgba(123,95,196,0.18);
      white-space:nowrap;
    }
    .tab-chevron{ opacity:0.5; font-size: 11px; }

    .sidebar-menu a:hover{
      background: var(--neutral-bg);
      border-color: var(--border-light);
      color: var(--text-dark);
      transform: translateY(-1px);
    }
    .sidebar-menu a.active{
      background: var(--lighter-purple);
      color: var(--accent-purple);
      border-color: rgba(123,95,196,0.22);
      box-shadow: 0 8px 16px rgba(123,95,196,0.10);
    }
    .sidebar-menu a.active .tab-meta{
      background: rgba(123,95,196,0.14);
      border-color: rgba(123,95,196,0.22);
    }

    /* Content */
    .profile-content{
      flex:1;
      background: var(--primary-white);
      border-radius: var(--radius-xl);
      padding: var(--pad-3);
      box-shadow: var(--premium-card-shadow);
      border: 1px solid var(--border-light);
      position: relative;
      overflow:hidden;

      /* Less “jumpy”: reserve space + avoid layout snap */
      min-height: 540px;
    }
    .profile-content::before{
      content:"";
      position:absolute;
      top:0; left:0; width:100%; height:4px;
      background: var(--premium-gradient);
    }

    /* Section header – compact */
    .section-head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 14px;
      margin-bottom: 14px;
      padding-bottom: 14px;
      border-bottom: 1px solid var(--border-light);
    }
    .section-title{
      font-size: 22px;
      font-weight: 800;
      display:flex;
      align-items:center;
      gap: 10px;
      letter-spacing:-0.01em;
      margin:0;
    }
    .section-title i{ color: var(--accent-purple); }
    .section-subtitle{
      margin-top: 6px;
      color: var(--text-medium);
      font-weight: 500;
      font-size: 13px;
      max-width: 740px;
    }

    /* Panel – compact */
    .panel{
      background: var(--neutral-bg);
      border: 1px solid var(--border-light);
      border-radius: var(--radius-lg);
      padding: var(--pad-2);
      transition: transform .15s ease, box-shadow .15s ease;
      box-shadow: 0 1px 0 rgba(0,0,0,0.02);
    }
    .panel:hover{
      transform: translateY(-1px);
      box-shadow: 0 10px 18px rgba(0,0,0,0.06);
    }
    .panel + .panel{ margin-top: 12px; }

    .panel-header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 10px;
    }
    .panel-title{
      font-weight: 850;
      font-size: 15px;
      display:flex;
      align-items:center;
      gap: 8px;
      color: var(--text-dark);
      margin: 0;
    }
    .panel-title i{ color: var(--accent-purple); }
    .panel-desc{
      color: var(--text-medium);
      font-size: 12px;
      margin-top: 5px;
      line-height: 1.5;
    }

    /* Grids – tighter */
    .grid-2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .stack{ display:flex; flex-direction:column; gap: 10px; }

    /* Form – tighter */
    .form-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 8px;
    }
    .form-group{ display:flex; flex-direction:column; gap: 6px; }
    .form-group.full-width{ grid-column: 1 / -1; }

    .form-label{
      font-weight: 750;
      color: var(--text-dark);
      font-size: 12px;
    }
    .form-input, .form-select, .form-textarea{
      padding: 11px 12px;
      border: 1px solid var(--medium-gray);
      border-radius: var(--radius-md);
      font-size: 13px;
      background: var(--primary-white);
      color: var(--text-dark);
      transition: border-color .15s ease, box-shadow .15s ease;
      outline: none;
    }
    .form-input:focus, .form-select:focus, .form-textarea:focus{
      border-color: var(--accent-purple);
      box-shadow: var(--focus-ring);
    }
    .form-textarea{ min-height: 104px; resize: vertical; }
    .form-hint{ font-size: 11px; color: var(--dark-gray); margin-top: 2px; }

    /* Toggle row – tighter */
    .toggle-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 12px 12px;
      border-radius: var(--radius-md);
      background: var(--primary-white);
      border: 1px solid var(--border-light);
    }
    .toggle-label{ font-weight: 800; font-size: 13px; }
    .toggle-description{ font-size: 11px; color: var(--text-medium); margin-top: 3px; }

    .toggle-switch{ position:relative; display:inline-block; width:46px; height:24px; flex:0 0 auto; }
    .toggle-switch input{ opacity:0; width:0; height:0; }
    .toggle-slider{
      position:absolute; cursor:pointer; inset:0;
      background-color: var(--medium-gray);
      transition: .2s;
      border-radius: 999px;
    }
    .toggle-slider:before{
      position:absolute; content:"";
      height:16px; width:16px;
      left:4px; bottom:4px;
      background:#fff;
      transition: .2s;
      border-radius: 50%;
    }
    input:checked + .toggle-slider{ background-color: var(--accent-purple); }
    input:checked + .toggle-slider:before{ transform: translateX(22px); }

    /* Status pills – compact */
    .status-pill{
      font-size: 11px;
      font-weight: 900;
      padding: 6px 10px;
      border-radius: 999px;
      display:inline-flex;
      align-items:center;
      gap: 7px;
      border: 1px solid var(--border-light);
      background: rgba(0,0,0,0.02);
      color: var(--text-dark);
      white-space:nowrap;
    }
    .status-pill i{ font-size: 11px; }
    .status-active{
      background: rgba(16, 185, 129, 0.12);
      border-color: rgba(16,185,129,0.22);
      color: #10B981;
    }
    .status-warning{
      background: rgba(245, 158, 11, 0.14);
      border-color: rgba(245,158,11,0.22);
      color: #F59E0B;
    }
    .status-inactive{
      background: rgba(239, 68, 68, 0.12);
      border-color: rgba(239,68,68,0.22);
      color: #EF4444;
    }

    /* Details – compact */
    .detail-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 8px;
    }
    .detail{
      background: var(--primary-white);
      border: 1px solid var(--border-light);
      border-radius: var(--radius-md);
      padding: 10px 10px;
    }
    .detail-label{
      font-size: 11px;
      color: var(--text-medium);
      margin-bottom: 3px;
      font-weight: 800;
    }
    .detail-value{
      font-weight: 850;
      font-size: 13px;
    }

    /* History – compact */
    .history-list{
      margin-top: 10px;
      border: 1px solid var(--border-light);
      border-radius: var(--radius-md);
      overflow:hidden;
      background: var(--primary-white);
    }
    .history-row{
      display:flex;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 12px;
      border-bottom: 1px solid var(--border-light);
    }
    .history-row:last-child{ border-bottom:none; }
    .history-title{ font-weight: 850; font-size: 13px; }
    .history-date{ font-size: 11px; color: var(--text-medium); font-weight: 700; }
    .history-amt{ font-weight: 900; font-size: 13px; }

    /* Buttons + action bar – compact, consistent */
    .btn{
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 850;
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease, border-color .15s ease;
      font-size: 12.5px;
      border: none;
      display:inline-flex;
      align-items:center;
      gap: 9px;
      white-space:nowrap;
    }
    .btn-primary{
      background: var(--accent-purple);
      color: #fff;
      box-shadow: 0 2px 8px rgba(123,95,196,0.20);
    }
    .btn-primary:hover{
      background: var(--accent-purple-dark);
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(123,95,196,0.24);
    }

    .btn-secondary{
      background: var(--primary-white);
      color: var(--text-dark);
      border: 1px solid var(--border-light);
    }
    .btn-secondary:hover{
      transform: translateY(-1px);
      border-color: rgba(123,95,196,0.25);
      box-shadow: 0 8px 16px rgba(0,0,0,0.06);
    }

    .btn-danger{
      background: var(--crisis-red);
      color:#fff;
      box-shadow: 0 2px 8px rgba(239,68,68,0.18);
    }
    .btn-danger:hover{
      background:#EF4444;
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(239,68,68,0.22);
    }

    .actions-bar{
      display:flex;
      justify-content:flex-end;
      gap: 10px;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid var(--border-light);
    }

    /* LESS JUMPY:
       1) Keep sections in flow but visually hidden.
       2) Disable large translate animations.
       3) Fixed min-height on content container above.
    */
    .profile-section{
      display:block; /* keep in layout */
      opacity:0;
      max-height:0;
      overflow:hidden;
      pointer-events:none;
      transition: opacity .12s ease;
    }
    .profile-section.active{
      opacity:1;
      max-height: 2000px; /* enough to show content; avoids layout snap */
      overflow: visible;
      pointer-events:auto;
    }

    /* ===========================
       FOOTER (unchanged)
    =========================== */
    footer{
      background-color: var(--primary-white);
      padding: 34px 0 18px;
      color: var(--text-medium);
      border-top: 1px solid var(--border-light);
    }
    .footer-content{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 70px;
      margin-bottom: 34px;
      align-items: start;
    }
    .footer-about{ max-width: 400px; padding-left: 20px; }
    .footer-logo{ display:flex; align-items:center; margin-bottom: 10px; }
    .footer-logo-img{
      height: 100px;
      width:auto;
      padding: 8px 0;
      transition: all .2s ease;
      display:block;
      min-height:100px;
    }
    .dark-mode .footer-logo-img{ content:url("assets/img/logo-dark.png"); }
    .footer-description{ margin-bottom: 10px; line-height: 1.6; }
    .footer-heading{ font-size: 18px; font-weight: 650; margin-bottom: 18px; color: var(--text-dark); }
    .footer-links{ list-style:none; }
    .footer-link{ margin-bottom: 10px; }
    .footer-link a{
      color: var(--text-medium);
      text-decoration:none;
      transition: color .15s ease;
    }
    .footer-link a:hover{ color: var(--accent-purple); }
    .footer-bottom{
      text-align:center;
      padding-top: 22px;
      border-top: 1px solid var(--border-light);
      font-size: 14px;
    }
    .footer-nav{ background:transparent; padding:0; border-radius:0; box-shadow:none; margin:0; }
    .footer-nav-grid{ display:grid; grid-template-columns: 1fr 1fr; gap: 40px; }
    .footer-newsletter{ text-align:center; }
    .footer-newsletter-title{ font-size: 18px; font-weight: 650; margin-bottom: 12px; color: var(--text-dark); }
    .footer-newsletter-form{ display:flex; flex-direction:column; gap:10px; max-width: 300px; margin: 0 auto; }
    .footer-newsletter-input{
      padding: 11px 14px;
      border: 1px solid var(--medium-gray);
      border-radius: 8px;
      font-size: 13px;
      background: var(--primary-white);
      color: var(--text-dark);
      outline:none;
    }
    .footer-newsletter-input:focus{ border-color: var(--accent-purple); box-shadow: var(--focus-ring); }
    .footer-newsletter-button{
      background: var(--accent-purple);
      color: #fff;
      border:none;
      padding: 11px 18px;
      border-radius: 8px;
      font-weight: 750;
      cursor:pointer;
      font-size: 13px;
      transition: all .2s ease;
    }
    .footer-newsletter-button:hover{
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(123, 95, 196, 0.26);
    }

    /* ===========================
       RESPONSIVE
    =========================== */
    @media (max-width: 1200px){
      .detail-grid{ grid-template-columns: 1fr; }
      .form-grid{ grid-template-columns: 1fr; }
      .grid-2{ grid-template-columns: 1fr; }
    }

    @media (max-width: 992px){
      .nav-links{ gap: 30px; }
      .footer-content{ grid-template-columns: 1fr 1fr; gap: 50px; }
      .profile-container{ flex-direction:column; }
      .profile-sidebar{ width:100%; position:relative; top:auto; }
      .profile-content{ padding: var(--pad-2); min-height: 0; }
      .profile-section.active{ max-height: 3000px; }
    }

    @media (max-width: 768px){
      .nav-container{ justify-content:center; position:relative; }
      .logo{
        position:absolute; left:50%;
        transform: translateX(-50%);
        display:flex; align-items:center; height:100%;
      }
      .logo-img{
        height:125px;
        transform:none;
        padding:12px 0;
        display:flex; align-items:center;
      }
      .mobile-toggle{
        display:flex;
        position:absolute;
        left:20px;
        align-items:center;
      }
      .nav-actions{
        transform:none;
        gap:16px;
        position:absolute;
        right:20px;
        align-items:center;
      }
      .nav-actions .sign-in{ display:none; }
      .nav-actions .header-cta{ display:none; }

      .nav-links{
        display:none;
        position:absolute;
        top:100%; left:0;
        width:100%;
        background: var(--nav-bg);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        flex-direction:column;
        padding:20px;
        border-top:1px solid var(--border-light);
        box-shadow: 0 10px 22px rgba(0,0,0,0.10);
        gap: 18px;
      }
      .nav-links.active{ display:flex; }
      .nav-link-container{ display:flex; align-items:center; justify-content:flex-start; width:100%; }
      .new-tag{ position:static; margin-left:8px; }

      .mobile-sign-in{
        display:block !important;
        margin-top: 6px;
        padding: 12px 20px;
        background: #fff;
        color: var(--accent-purple);
        border-radius: 10px;
        text-align:center;
        font-weight: 800;
        text-decoration:none;
        border: 2px solid var(--accent-purple);
      }
      .dark-mode .mobile-sign-in{ background: var(--primary-white); color: var(--accent-purple); }

      main{ padding: 92px 12px 14px; }
      .profile-title{ font-size: 32px; }
      .profile-subtitle{ font-size: 14px; }
      .actions-bar{ flex-direction:column; align-items:stretch; }
      .btn{ width:100%; justify-content:center; }

      .footer-content{ grid-template-columns: 1fr; gap: 36px; }
      .footer-nav-grid{ grid-template-columns: 1fr 1fr; gap: 26px; }
      .footer-logo-img{ height:120px; }
    }

    @media (max-width: 480px){
      .logo-img{ height:100px; }
      .footer-logo-img{ height:100px; }
      .profile-title{ font-size: 30px; }
      .footer-nav-grid{ grid-template-columns: 1fr; gap: 18px; }
    }

    /* Reduce motion preference */
    @media (prefers-reduced-motion: reduce){
      *{ transition: none !important; animation: none !important; }
      html{ scroll-behavior: auto; }
    }
  </style>
</head>

<body>

  <!-- Navigation -->
  <nav>
    <div class="container nav-container">
      <button class="mobile-toggle" aria-label="Open menu"><i class="fas fa-bars"></i></button>

      <a href="index.html" class="logo" aria-label="Home">
        <img src="assets/img/logo.png" alt="The Employee Playbook" class="logo-img" id="logo">
      </a>

      <div class="nav-links" role="navigation" aria-label="Primary">
        <a href="the-lens.html" class="nav-link">The Lens</a>
        <a href="the-toolkit.html" class="nav-link">The Toolkit</a>
        <div class="nav-link-container">
          <a href="the-coach.html" class="nav-link">The Coach</a>
          <span class="new-tag">NEW</span>
        </div>
        <a href="the-shift.html" class="nav-link">The Shift</a>
        <a href="the-pricing.html" class="nav-link">The Pricing</a>
        <a href="sign-in.html" class="mobile-sign-in">Sign In</a>
      </div>

      <div class="nav-actions">
        <a href="create-account.html" class="header-cta">Sign up</a>
        <a href="sign-in.html" class="sign-in">Sign in</a>
        <button class="theme-toggle" aria-label="Toggle theme"><i class="fas fa-moon"></i></button>
      </div>
    </div>
  </nav>

  <main>
    <div class="container">
      <div class="content-wrapper">

        <div class="profile-header">
          <h1 class="profile-title">Your Profile</h1>
          <p class="profile-subtitle">Manage details, preferences, security and billing with minimal scrolling and smoother tab switching.</p>
        </div>

        <div class="profile-container">

          <aside class="profile-sidebar" aria-label="Profile navigation">
            <div class="profile-picture">
              <div class="profile-avatar" aria-hidden="true"><i class="fas fa-user"></i></div>
              <div class="profile-name">Alex Johnson</div>
              <div class="profile-role">Product Manager</div>
              <button class="change-photo" type="button"><i class="fas fa-camera"></i> Change photo</button>
            </div>

            <ul class="sidebar-menu" role="tablist" aria-label="Profile tabs">
              <li>
                <a href="#personal" class="active" data-tab="personal" role="tab" aria-selected="true">
                  <span class="sidebar-left"><i class="fas fa-user"></i> Personal details</span>
                  <span style="display:flex; align-items:center; gap:10px;">
                    <span class="tab-meta">PROFILE</span>
                    <i class="fas fa-chevron-right tab-chevron" aria-hidden="true"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="#preferences" data-tab="preferences" role="tab" aria-selected="false">
                  <span class="sidebar-left"><i class="fas fa-cog"></i> Preferences</span>
                  <span style="display:flex; align-items:center; gap:10px;">
                    <span class="tab-meta">SETTINGS</span>
                    <i class="fas fa-chevron-right tab-chevron" aria-hidden="true"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="#security" data-tab="security" role="tab" aria-selected="false">
                  <span class="sidebar-left"><i class="fas fa-shield-alt"></i> Security</span>
                  <span style="display:flex; align-items:center; gap:10px;">
                    <span class="tab-meta">SAFE</span>
                    <i class="fas fa-chevron-right tab-chevron" aria-hidden="true"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="#billing" data-tab="billing" role="tab" aria-selected="false">
                  <span class="sidebar-left"><i class="fas fa-credit-card"></i> Billing</span>
                  <span style="display:flex; align-items:center; gap:10px;">
                    <span class="tab-meta">PLAN</span>
                    <i class="fas fa-chevron-right tab-chevron" aria-hidden="true"></i>
                  </span>
                </a>
              </li>
            </ul>
          </aside>

          <section class="profile-content" aria-label="Profile content">

            <!-- PERSONAL -->
            <div id="personal" class="profile-section active" data-section="personal">
              <div class="section-head">
                <div>
                  <h2 class="section-title"><i class="fas fa-user"></i> Personal details</h2>
                  <p class="section-subtitle">Keep your info accurate so exports and recommendations stay consistent.</p>
                </div>
                <span class="status-pill status-active"><i class="fas fa-circle-check"></i> Active</span>
              </div>

              <div class="panel">
                <div class="panel-header">
                  <div>
                    <h3 class="panel-title"><i class="fas fa-id-card"></i> Core information</h3>
                    <div class="panel-desc">Used across The Lens, Toolkit and downloads.</div>
                  </div>
                </div>

                <form class="profile-form" autocomplete="on">
                  <div class="form-grid">
                    <div class="form-group">
                      <label class="form-label" for="firstName">First name</label>
                      <input id="firstName" type="text" class="form-input" value="Alex">
                    </div>

                    <div class="form-group">
                      <label class="form-label" for="lastName">Last name</label>
                      <input id="lastName" type="text" class="form-input" value="Johnson">
                    </div>

                    <div class="form-group">
                      <label class="form-label" for="email">Email address</label>
                      <input id="email" type="email" class="form-input" value="alex.johnson@example.com">
                    </div>

                    <div class="form-group">
                      <label class="form-label" for="phone">Phone number</label>
                      <input id="phone" type="tel" class="form-input" value="+44 7700 900123">
                    </div>

                    <div class="form-group">
                      <label class="form-label" for="jobTitle">Job title</label>
                      <input id="jobTitle" type="text" class="form-input" value="Product Manager">
                    </div>

                    <div class="form-group">
                      <label class="form-label" for="industry">Industry</label>
                      <select id="industry" class="form-select">
                        <option selected>Technology</option>
                        <option>Healthcare</option>
                        <option>Finance</option>
                        <option>Education</option>
                        <option>Retail</option>
                        <option>Manufacturing</option>
                        <option>Other</option>
                      </select>
                    </div>

                    <div class="form-group full-width">
                      <label class="form-label" for="bio">Bio</label>
                      <textarea id="bio" class="form-textarea" placeholder="Tell us a bit about yourself...">Experienced product manager with a focus on workplace productivity tools.</textarea>
                      <div class="form-hint">Keep it short — this can appear in certain exports.</div>
                    </div>
                  </div>

                  <div class="actions-bar">
                    <button type="button" class="btn btn-secondary"><i class="fas fa-rotate-left"></i> Cancel</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-floppy-disk"></i> Save</button>
                  </div>
                </form>
              </div>
            </div>

            <!-- PREFERENCES -->
            <div id="preferences" class="profile-section" data-section="preferences">
              <div class="section-head">
                <div>
                  <h2 class="section-title"><i class="fas fa-cog"></i> Preferences</h2>
                  <p class="section-subtitle">Control what you receive and how the system communicates.</p>
                </div>
                <span class="status-pill"><i class="fas fa-sliders"></i> Set</span>
              </div>

              <div class="panel">
                <div class="panel-header">
                  <div>
                    <h3 class="panel-title"><i class="fas fa-envelope"></i> Notifications</h3>
                    <div class="panel-desc">Choose what gets sent to your inbox.</div>
                  </div>
                </div>

                <div class="stack">
                  <div class="toggle-row">
                    <div>
                      <div class="toggle-label">Email notifications</div>
                      <div class="toggle-description">Updates about new resources and changes.</div>
                    </div>
                    <label class="toggle-switch" aria-label="Email notifications">
                      <input type="checkbox" checked>
                      <span class="toggle-slider"></span>
                    </label>
                  </div>

                  <div class="toggle-row">
                    <div>
                      <div class="toggle-label">Weekly digest</div>
                      <div class="toggle-description">A single summary email, once a week.</div>
                    </div>
                    <label class="toggle-switch" aria-label="Weekly digest">
                      <input type="checkbox" checked>
                      <span class="toggle-slider"></span>
                    </label>
                  </div>

                  <div class="toggle-row">
                    <div>
                      <div class="toggle-label">Product updates</div>
                      <div class="toggle-description">When new features are released.</div>
                    </div>
                    <label class="toggle-switch" aria-label="Product updates">
                      <input type="checkbox">
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>

                <div class="actions-bar">
                  <button type="button" class="btn btn-secondary"><i class="fas fa-wand-magic-sparkles"></i> Reset</button>
                  <button type="button" class="btn btn-primary"><i class="fas fa-floppy-disk"></i> Save</button>
                </div>
              </div>

              <div class="panel">
                <div class="panel-header">
                  <div>
                    <h3 class="panel-title"><i class="fas fa-comments"></i> Communication style</h3>
                    <div class="panel-desc">Influences how The Lens frames recommendations.</div>
                  </div>
                </div>

                <div class="form-grid">
                  <div class="form-group">
                    <label class="form-label" for="commStyle">Preferred style</label>
                    <select id="commStyle" class="form-select">
                      <option selected>Strategic & analytical</option>
                      <option>Direct & action-oriented</option>
                      <option>Empathetic & supportive</option>
                      <option>Balanced approach</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label class="form-label" for="challengeFocus">Challenge focus</label>
                    <select id="challengeFocus" class="form-select">
                      <option>Leadership & management</option>
                      <option>Team dynamics</option>
                      <option>Career growth</option>
                      <option>Work–life balance</option>
                      <option selected>All areas</option>
                    </select>
                  </div>
                </div>

                <div class="actions-bar">
                  <button type="button" class="btn btn-secondary"><i class="fas fa-rotate-left"></i> Cancel</button>
                  <button type="button" class="btn btn-primary"><i class="fas fa-floppy-disk"></i> Save</button>
                </div>
              </div>
            </div>

            <!-- SECURITY -->
            <div id="security" class="profile-section" data-section="security">
              <div class="section-head">
                <div>
                  <h2 class="section-title"><i class="fas fa-shield-alt"></i> Security</h2>
                  <p class="section-subtitle">Protect your account with a clean, compact layout.</p>
                </div>
                <span class="status-pill status-warning"><i class="fas fa-triangle-exclamation"></i> 2FA</span>
              </div>

              <div class="grid-2">
                <div class="panel">
                  <div class="panel-header">
                    <div>
                      <h3 class="panel-title"><i class="fas fa-key"></i> Password</h3>
                      <div class="panel-desc">Keep your account protected.</div>
                    </div>
                    <span class="status-pill status-active"><i class="fas fa-circle-check"></i> Active</span>
                  </div>

                  <div class="detail-grid">
                    <div class="detail">
                      <div class="detail-label">Last changed</div>
                      <div class="detail-value">3 months ago</div>
                    </div>
                    <div class="detail">
                      <div class="detail-label">Strength</div>
                      <div class="detail-value">Good</div>
                    </div>
                  </div>

                  <div class="actions-bar">
                    <button class="btn btn-secondary" type="button"><i class="fas fa-lock"></i> Change</button>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-header">
                    <div>
                      <h3 class="panel-title"><i class="fas fa-mobile-screen-button"></i> Two-factor authentication</h3>
                      <div class="panel-desc">Extra protection at sign-in.</div>
                    </div>
                    <span class="status-pill status-inactive"><i class="fas fa-circle-xmark"></i> Off</span>
                  </div>

                  <div class="actions-bar">
                    <button class="btn btn-primary" type="button"><i class="fas fa-shield"></i> Enable</button>
                  </div>
                </div>
              </div>

              <div class="grid-2" style="margin-top:12px;">
                <div class="panel">
                  <div class="panel-header">
                    <div>
                      <h3 class="panel-title"><i class="fas fa-desktop"></i> Active sessions</h3>
                      <div class="panel-desc">Manage logged-in devices.</div>
                    </div>
                  </div>

                  <div class="detail-grid">
                    <div class="detail">
                      <div class="detail-label">Current device</div>
                      <div class="detail-value">Windows • Chrome</div>
                    </div>
                    <div class="detail">
                      <div class="detail-label">Last activity</div>
                      <div class="detail-value">Just now</div>
                    </div>
                  </div>

                  <div class="actions-bar">
                    <button class="btn btn-secondary" type="button"><i class="fas fa-list"></i> View</button>
                  </div>
                </div>

                <div class="panel">
                  <div class="panel-header">
                    <div>
                      <h3 class="panel-title"><i class="fas fa-life-ring"></i> Account recovery</h3>
                      <div class="panel-desc">Set recovery options.</div>
                    </div>
                  </div>

                  <div class="detail-grid">
                    <div class="detail">
                      <div class="detail-label">Recovery email</div>
                      <div class="detail-value">Not set</div>
                    </div>
                    <div class="detail">
                      <div class="detail-label">Recovery phone</div>
                      <div class="detail-value">Set</div>
                    </div>
                  </div>

                  <div class="actions-bar">
                    <button class="btn btn-secondary" type="button"><i class="fas fa-gear"></i> Set up</button>
                  </div>
                </div>
              </div>

              <div class="panel" style="margin-top:12px;">
                <div class="panel-header">
                  <div>
                    <h3 class="panel-title"><i class="fas fa-triangle-exclamation"></i> Account controls</h3>
                    <div class="panel-desc">High-impact actions live here.</div>
                  </div>
                </div>
                <div class="actions-bar">
                  <button type="button" class="btn btn-danger"><i class="fas fa-user-slash"></i> Deactivate</button>
                </div>
              </div>
            </div>

            <!-- BILLING -->
            <div id="billing" class="profile-section" data-section="billing">
              <div class="section-head">
                <div>
                  <h2 class="section-title"><i class="fas fa-credit-card"></i> Billing</h2>
                  <p class="section-subtitle">Plan details and history with tighter spacing.</p>
                </div>
                <span class="status-pill status-active"><i class="fas fa-crown"></i> Premium</span>
              </div>

              <div class="panel">
                <div class="panel-header">
                  <div>
                    <h3 class="panel-title"><i class="fas fa-receipt"></i> Current plan</h3>
                    <div class="panel-desc">Subscription and next billing details.</div>
                  </div>
                  <span class="status-pill status-active"><i class="fas fa-circle-check"></i> Active</span>
                </div>

                <div class="detail-grid">
                  <div class="detail">
                    <div class="detail-label">Billing cycle</div>
                    <div class="detail-value">Monthly</div>
                  </div>
                  <div class="detail">
                    <div class="detail-label">Next billing</div>
                    <div class="detail-value">15 March 2026</div>
                  </div>
                  <div class="detail">
                    <div class="detail-label">Payment method</div>
                    <div class="detail-value">Visa ending 4242</div>
                  </div>
                  <div class="detail">
                    <div class="detail-label">Plan cost</div>
                    <div class="detail-value">£19 / month</div>
                  </div>
                </div>

                <div class="actions-bar">
                  <button class="btn btn-secondary" type="button"><i class="fas fa-credit-card"></i> Update</button>
                  <button class="btn btn-primary" type="button"><i class="fas fa-arrow-right-arrow-left"></i> Change</button>
                </div>
              </div>

              <div class="panel">
                <div class="panel-header">
                  <div>
                    <h3 class="panel-title"><i class="fas fa-clock-rotate-left"></i> Billing history</h3>
                    <div class="panel-desc">Download invoices.</div>
                  </div>
                </div>

                <div class="history-list" aria-label="Billing history list">
                  <div class="history-row">
                    <div>
                      <div class="history-title">Premium plan</div>
                      <div class="history-date">15 February 2026</div>
                    </div>
                    <div class="history-amt">£19.00</div>
                  </div>
                  <div class="history-row">
                    <div>
                      <div class="history-title">Premium plan</div>
                      <div class="history-date">15 January 2026</div>
                    </div>
                    <div class="history-amt">£19.00</div>
                  </div>
                  <div class="history-row">
                    <div>
                      <div class="history-title">Premium plan</div>
                      <div class="history-date">15 December 2025</div>
                    </div>
                    <div class="history-amt">£19.00</div>
                  </div>
                </div>

                <div class="actions-bar">
                  <button class="btn btn-secondary" type="button"><i class="fas fa-file-arrow-down"></i> Download</button>
                </div>
              </div>
            </div>

          </section>
        </div>

      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-about">
          <div class="footer-logo">
            <a href="index.html">
              <img src="assets/img/logo.png" alt="The Employee Playbook" class="footer-logo-img" id="footer-logo">
            </a>
          </div>
          <p class="footer-description">A private strategy system giving employees clarity and advantage in the moments that matter most.</p>
        </div>

        <div class="footer-newsletter">
          <h3 class="footer-newsletter-title">Stay updated with strategic insights</h3>
          <form class="footer-newsletter-form">
            <input type="email" class="footer-newsletter-input" placeholder="Your email" required>
            <button type="submit" class="footer-newsletter-button">Subscribe</button>
          </form>
        </div>

        <div class="footer-nav">
          <div class="footer-nav-grid">
            <div class="footer-nav-section">
              <h3 class="footer-heading">The Playbook</h3>
              <ul class="footer-links">
                <li class="footer-link"><a href="the-lens.html">The Lens</a></li>
                <li class="footer-link"><a href="the-toolkit.html">The Toolkit</a></li>
                <li class="footer-link"><a href="the-coach.html">The Coach</a></li>
                <li class="footer-link"><a href="the-shift.html">The Shift</a></li>
                <li class="footer-link"><a href="the-pricing.html">The Pricing</a></li>
              </ul>
            </div>

            <div class="footer-nav-section">
              <h3 class="footer-heading">The Company</h3>
              <ul class="footer-links">
                <li class="footer-link"><a href="about-us.html">About</a></li>
                <li class="footer-link"><a href="#">Privacy</a></li>
                <li class="footer-link"><a href="terms-and-conditions.html">Terms</a></li>
                <li class="footer-link"><a href="#">Security</a></li>
                <li class="footer-link"><a href="#">Help Centre</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>© 2025 The Employee Playbook. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.body.classList.add('loaded');

      // Sync theme (html.dark-mode) -> body for existing variable usage
      if (document.documentElement.classList.contains('dark-mode')) {
        document.body.classList.add('dark-mode');
      }

      const themeToggle = document.querySelector('.theme-toggle');
      const themeIcon = themeToggle.querySelector('i');

      // Initialise icon state
      const savedTheme = localStorage.getItem('theme');
      const isDark = savedTheme ? savedTheme === 'dark' : document.body.classList.contains('dark-mode');
      if (isDark) {
        themeIcon.classList.remove('fa-moon');
        themeIcon.classList.add('fa-sun');
      }

      themeToggle.addEventListener('click', function () {
        document.body.classList.toggle('dark-mode');
        document.documentElement.classList.toggle('dark-mode');

        const nowDark = document.body.classList.contains('dark-mode');
        themeIcon.classList.toggle('fa-moon');
        themeIcon.classList.toggle('fa-sun');
        localStorage.setItem('theme', nowDark ? 'dark' : 'light');

        const logo = document.getElementById('logo');
        const footerLogo = document.getElementById('footer-logo');
        if (nowDark) {
          logo.src = 'assets/img/logo-dark.png';
          footerLogo.src = 'assets/img/logo-dark.png';
        } else {
          logo.src = 'assets/img/logo.png';
          footerLogo.src = 'assets/img/logo.png';
        }
      });

      // Mobile nav toggle
      const mobileBtn = document.querySelector('.mobile-toggle');
      const navLinks = document.querySelector('.nav-links');
      mobileBtn.addEventListener('click', function () {
        navLinks.classList.toggle('active');
        const icon = this.querySelector('i');
        icon.classList.toggle('fa-bars');
        icon.classList.toggle('fa-times');
      });

      // Tabs: prevent scroll jump, keep height more stable
      const sidebarLinks = document.querySelectorAll('.sidebar-menu a[data-tab]');
      const sections = document.querySelectorAll('.profile-section');
      const content = document.querySelector('.profile-content');

      // Set a stable min-height based on largest section (reduces jump on switch)
      function computeMaxSectionHeight() {
        let max = 0;
        sections.forEach(s => {
          // Temporarily force visibility for measurement
          const wasActive = s.classList.contains('active');
          s.classList.add('active');
          const h = s.scrollHeight;
          if (!wasActive) s.classList.remove('active');
          max = Math.max(max, h);
        });
        // Clamp so it doesn't create pointless whitespace on desktop
        const clamped = Math.min(Math.max(max + 40, 520), 900);
        content.style.minHeight = clamped + 'px';
      }

      function setActiveTab(tabId, pushHash = true) {
        // Keep current scroll position so switching doesn't “jump”
        const x = window.scrollX;
        const y = window.scrollY;

        sidebarLinks.forEach(a => {
          const active = a.dataset.tab === tabId;
          a.classList.toggle('active', active);
          a.setAttribute('aria-selected', active ? 'true' : 'false');
        });

        sections.forEach(s => {
          const active = s.dataset.section === tabId;
          s.classList.toggle('active', active);
        });

        if (pushHash) history.replaceState(null, '', '#' + tabId);

        // Restore scroll position
        window.scrollTo(x, y);
      }

      sidebarLinks.forEach(link => {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          setActiveTab(this.dataset.tab, true);
          // close mobile menu if open
          navLinks.classList.remove('active');
          const icon = mobileBtn.querySelector('i');
          icon.classList.add('fa-bars');
          icon.classList.remove('fa-times');
        });
      });

      // Initial from hash (deep links)
      const initial = (location.hash || '#personal').replace('#', '');
      const valid = Array.from(sidebarLinks).some(a => a.dataset.tab === initial);
      setActiveTab(valid ? initial : 'personal', false);

      // Compute stable height (after fonts/layout)
      setTimeout(computeMaxSectionHeight, 0);
      window.addEventListener('resize', () => {
        // Avoid thrash
        clearTimeout(window.__tepProfileResize);
        window.__tepProfileResize = setTimeout(computeMaxSectionHeight, 120);
      });
    });
  </script>

</body>
</html>
